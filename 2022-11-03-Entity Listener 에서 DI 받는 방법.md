---
aliases: []
categories: [조각글]
date-created: November 3, 2022 12:34 PM
tags: [Spring, 개발 일반]
date-updated: 2023-02-27 06:06
---

JPA 는 엔티티에 등록된 엔티티 리스너를 빈으로 등록한다.

따라서 따로 `@Component` 를 통해서 등록할 필요가 없다.

단, JPA 가 해당 엔티티 리스너를 빈으로 등록하기 위해 No-args constructor 가 필요하다. 

하지만 No-args constructor 를 정의하게 되면 사용하고자 하는 디펜던시를 생성자 주입으로 받지 못한다.
<br><br>
## 하지만 결론

엔티티를 조작하거나 다른 요소에 의존성을 가지게 되는 관련된 추가로직을 EntityListener 를 정의하는 것은 지양하도록한다.

- 왜냐하면 데이터 관련 로직을 테스트 할 때 매우 불편해진다.
    - 엔티티 리스너가 뜰 때 관련 의존하는 빈이 없으면 정상적으로 뜰 수 없음.
- 엔티티 리스너는 엔티티 관련, DB 관련 로직만 간단히 처리하는 방식으로만 사용하는 것이 좋을 듯.
- CDC 를 구현하기에 좋다고 생각했지만 이러한 문제를 해결할 수 없다면 불편해진다.