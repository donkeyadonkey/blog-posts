---
aliases: []
date-created: March 28, 2022 6:42 PM
tags:
  - Web
date-updated: 2023-02-27 05:49
categories:
  - ì¡°ê°ê¸€
---
<br><br>
## Stomp

> **Simple Text Oriented Messaging Protocol** ì˜ ì•½ìë¡œì„œ, WebSocket í™˜ê²½ì—ì„œ ë™ì‘í•˜ëŠ” ë©”ì‹œì§€ í”„ë¡œí† ì½œì´ë‹¤.
>
> - í—¤ë”ì— `key:value` ë¡œ ë©”ì‹œì§€ì— ëŒ€í•œ ì •ë³´ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.
> - **Publisher** â€” **Subscriber** ë¥¼ ì§€ì •í•˜ê³  ë©”ì‹œì§€ë¥¼ ì£¼ê³ ë°›ëŠ”ë‹¤.
> - **`SEND`**, **`SUBSCRIBE`** ë¼ëŠ” COMMAND ë¥¼ ì‚¬ìš©í•œë‹¤.
> - Spring ì´ Stomp ë¥¼ í†µí•œ ì†Œì¼“ í†µì‹ ì„ ì§€ì›í•œë‹¤.
> 	- contents
>
> 		> ì•„ë˜ì™€ ê°™ì´ ë©”ì†Œë“œë¥¼ ì˜¤ë²„ë¼ì´ë“œí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

```java
 @Configuration
 @EnableWebSocketMessageBroker
 public class WebsocketConfiguration implements WebSocketMessageBrokerConfigurer {
 
	 @Override
	 public void registerStompEndpoints(StompEndpointRegistry registry) {
		 registry.addEndpoint("/stomp/chat") // handshake ë‹´ë‹¹ url
				 .setAllowedOriginPatterns("*")
				 .withSockJS();
	 }
 }
```

> - ë”°ë¼ì„œ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ Stomp í´ë¼ì´ì–¸íŠ¸ë¥¼ í†µí•´ Spring ê³¼ ì†Œí†µí•  ìˆ˜ ìˆë‹¤.

### í—¤ë”ì™€ COMMAND

![image](https://s3.ap-northeast-2.amazonaws.com/donkeyadonkey-assets/img/d8a26ac4c1db69d8427ceb5aa607fcb2.png)

![image](https://s3.ap-northeast-2.amazonaws.com/donkeyadonkey-assets/img/a59df94e635fa9d44521207b6627b74a.png)

- ëŒ€í‘œì ìœ¼ë¡œ destination, id, content-length ë“±ì˜ í—¤ë”ë¥¼ ê°€ì§„ë‹¤.
- destination ì€ ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ê³³ì„ í‘œí˜„í•œë‹¤.
- SUBSCRIBE ëŠ” í˜„ì¬ í´ë¼ì´ì–¸íŠ¸ê°€ destination ìœ¼ë¡œ ì˜¤ëŠ” ë©”ì‹œì§€ë¥¼ ë°›ê² ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.
- SEND ëŠ” destination ìœ¼ë¡œ ë©”ì‹œì§€ë¥¼ ë³´ë‚¸ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.

<aside>
ğŸ“Œ ì´ë•Œ ë©”ì‹œì§€ ë¸Œë¡œì»¤ (RabbitMQ ë“±) ëŠ” ì´ STOMP í”„ë¡œí† ì½œì— ë‹´ê¸´ ë©”ì‹œì§€ë¥¼ ê° ë„ì°©ì§€ê¹Œì§€ ì „ë‹¬í•˜ëŠ” ì—­í• ì„ í•œë‹¤ê³  ìƒê°í•˜ë©´ êµ¬ì¡°ê°€ íŒŒì•…ëœë‹¤.

</aside>
