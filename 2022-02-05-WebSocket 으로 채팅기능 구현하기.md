---
aliases: []
date-created: February 5, 2022 5:09 PM
tags:
  - Web
date-updated: 2023-02-27 05:53
categories:
  - μ΅°κ°κΈ€
---
<br><br>
# 0. λ“¤μ–΄κ°€κΈ° μ „μ—
<br><br>
## κΈ°λ³Έμ μΈ HTTP ν†µμ‹ μ νΉμ„±

- ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„ μ†ν†µμ€ λ‹¨λ°©ν–¥μΌλ΅ μ΄λ£¨μ–΄μ§„λ‹¤.
	- μ”μ²­μ€ ν΄λΌμ΄μ–ΈνΈμ—μ„λ§ ν•  μ μμΌλ©° μ„λ²„μ—μ„ μ”μ²­μ„ λ³΄λ‚Ό μ μ—†λ‹¤.
- μ”μ²­κ³Ό μ‘λ‹µμ€ 1 νμ„±μΌλ΅ μ΄λ£¨μ–΄μ§„λ‹¤.
	- ν”ν β€statelessβ€™ ν•λ‹¤κ³  ν‘ν„ν•λ” κ²ƒ. ν†µμ‹ μ„ ν• ν›„μ—λ” μ„λ΅ μ—°κ²°μ€ μ™„μ „ν μΆ…λ£λλ‹¤.

### ν•„μ”ν• κΈ°λ¥

- ν΄λΌμ΄μ–ΈνΈ κ°„ μ§€μ†μ μΈ λ°μ΄ν„° κµν™
- ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„ μ§€μ†μ μΈ μ—°κ²°
<br><br>
# 1. λ‚΄μ©
<br><br>
## WebSocket μ΄μ „μ κΈ°μ λ“¤

### 1. polling

- ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„λ΅ μ§€μ†μ μΌλ΅ μ”μ²­μ„ λ³΄λ‚΄ μ‘λ‹µμ„ λ°›μ•„λ‚΄λ” λ°©λ²•μ΄λ‹¤. κ°€μ¥ μ‰½κ² μƒκ°ν•΄λ‚Ό μ μλ” λ°©λ²•.
- μΌμ • μ‹κ°„ κ°„κ²©μΌλ΅ κ³„μ† μ”μ²­μ„ λ³΄λ‚Έλ‹¤.

### 2. Long polling

- ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„λ΅ μ§€μ†μ μΌλ΅ μ”μ²­μ„ λ³΄λ‚΄λ” κ²ƒμ€ κ°™λ‹¤.
- λ‹¨, μΌμ • κ°„κ²©μΌλ΅ λ³΄λ‚΄λ” κ²ƒμ΄ μ•„λ‹λΌ time out λ λ•κΉμ§€ μ‘λ‹µμ„ κΈ°λ‹¤λ¦¬λ” νΉμ„±μ΄ μλ‹¤.
- λ”°λΌμ„ μ‚¬μ‹¤μƒ λ°μ΄ν„°λ¥Ό μ‹¤μ‹κ°„μΌλ΅ μ—…λ°μ΄νΈν•  μ μλ‹¤.

> λ‹¨μ 
>
> - μ„λ²„κ°€ μ‘λ‹µμ„ λΉ¨λ¦¬ ν•λ‹¤λ©΄ λ„λ¬΄ λ§μ€ μ”μ²­κ³Ό μ‘λ‹µμ΄ μ¤κ°€κ² λλ―€λ΅ μ„λ²„μ— λ¶€λ‹΄μ΄ λλ‹¤.

### 3. Streaming

- Polling, Long Polling κ³Ό λ‹¬λ¦¬ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„ μ—°κ²°μ„ λμ§€μ•κ³  ν•„μ”ν• λ°μ΄ν„°λ¥Ό κ³„μ† μ „λ‹¬ν•λ‹¤.
- ν• λ² μ—°κ²°μ΄ λ§Ίμ–΄μ§€λ©΄ μ„λ²„κ°€ κ³„μ†ν•΄μ„ λ°μ΄ν„°μ μƒνƒλ¥Ό μ—…λ°μ΄νΈν•΄ μ£Όλ” λ°©μ‹μ΄λ―€λ΅ ν΄λΌμ΄μ–ΈνΈκ°€ μ—¬λ¬λ² μ”μ²­ν•  ν•„μ”κ°€ μ—†λ‹¤.
<br><br>
## WebSocket

![image](https://s3.ap-northeast-2.amazonaws.com/donkeyadonkey-assets/img/0c85c7e91c27ae6033d53a469f06cff4.png)

### κ°μ”

> **HTTP μ™€ κµ¬λ³„λλ” μ „μ΄μ¤‘ (2-way communication) ν†µμ‹  ν”„λ΅ν† μ½.**
>
> - 80(HTTP), 443(HTTPS) ν¬νΈμ—μ„ λ™μ‘ν•λ‹¤. HTTP μ™€ νΈν™λλ„λ΅ μ„¤κ³„λμ—λ‹¤.
> - μ›Ήμ†μΌ“ ν”„λ΅ν† μ½μ€ `ws`, `wss` λΌλ” URI scheme μ„ μ‚¬μ©ν•λ‹¤.

- μ°Έκ³ : URI κµ¬μ΅°

	```java
	scheme:[//[user[:password]@]host[:port]][/path][?query][#fragment]
	```

### λ°©μ‹

> μ›Ήμ†μΌ“ ν†µμ‹ μ€ λ‹¤μκ³Ό κ°™μ€ κ³Όμ •μ„ κ±°μΉλ‹¤.
>
> 1. ν΄λΌμ΄μ–ΈνΈ ν•Έλ“μ…°μ΄ν¬ μ”μ²­
> 2. μ„λ²„μ μ‘λ‹µμΌλ΅ μ—°κ²°μ΄ λ§Ίμ–΄μ§
> 3. λ°μ΄ν„° ν†µμ‹ 

### Handshake

![image](https://s3.ap-northeast-2.amazonaws.com/donkeyadonkey-assets/img/6825b836cb37faa01392e8604fb7eb9b.png)

> **ν•Έλ“ μ…°μ΄ν¬ κ³Όμ •μ€ Upgrade HTTP μ”μ²­ - μ‘λ‹µμΌλ΅ μ΄λ£¨μ–΄μ§„λ‹¤.**
>
> - μ”μ²­ μΈ΅μ—μ„ `β€Connection: Upgradeβ€™` μ™€ `β€Upgrade: websocketβ€™` μ΄λΌλ” ν—¤λ”λ¥Ό κ°€μ§€κ³  μ”μ²­ν•λ‹¤.
> 	- μ΄λ• λ°©μ‹μ€ `GET` λ©”μ„λ“λ¥Ό μ‚¬μ©ν•λ©° `HTTP/1.1` λΌλ” Status Code λ¥Ό κ°€μ§„λ‹¤.
> - μ‘λ‹µ μΈ΅μ—μ„ `β€Connection: Upgradeβ€™`, `β€Upgrade: websocketβ€™` ν—¤λ”μ™€ `β€Sec-WebSocket-Acceptβ€™` ν—¤λ”μ— μ—°κ²°μ„ κ²€μ¦ν•  ν‚¤κ°’μ„ λ³΄λ‚΄ μ—°κ²°μ΄ λ§Ίμ–΄μ§„λ‹¤.
>
> <aside>
> π’΅ Upgrade λ” μΌλ°μ  HTTP μ—°κ²°μ—μ„ WebSocket μΌλ΅ upgrade ν•λ” μ†ν†µμ΄λΌκ³  μƒκ°ν•μ.
>
> </aside>

![image](https://s3.ap-northeast-2.amazonaws.com/donkeyadonkey-assets/img/0f7edd3cd466effde19bf4d7d76de65c.png)

β†’ μ”μ²­ - μ‘λ‹µ ν—¤λ”μ—μ„ `Upgrade` λ¥Ό ν™•μΈν•  μ μλ‹¤.

### λ©”μ‹μ§€ κµν™

> μ„ ν•Έλ“μ…°μ΄ν¬ κ³Όμ •μ΄ μ„±κ³µν–λ‹¤λ©΄ κ·Έ μ—°κ²° λ‚΄μ—μ„ λ©”μ‹μ§€λ¥Ό κµν™ν•  μ μλ‹¤.
>
> - h λ” μ—°κ²° μƒνƒλ¥Ό ν™•μΈν•λ” ping

![image](https://s3.ap-northeast-2.amazonaws.com/donkeyadonkey-assets/img/0eb3f2989d615255f47ac652a550a336.png)

### μ–‘λ°©ν–¥ ν†µμ‹ μ΄λΌκ³ ν•΄μ„ ν•­μƒ WebSocket μ΄ μΆ‹μ€ κ²ƒμ€ μ•„λ‹λ‹¤.

- λ³€κ²½ μ‚¬ν•­μ΄ μμ£Ό μΌμ–΄λ‚μ§€ μ•μ•„μ•Ό ν•λ” κ²½μ°,
- λ°μ΄ν„° ν¬κΈ°κ°€ μ‘μ€ κ²½μ°μ—” `polling`, `Long Polling, Streaming` μ΄ μ λ¦¬ν•  μ μλ‹¤.

> μ„μ™€ κ°™μ€ κ²½μ° μ΄μ™Έμ— λ°μ΄ν„°κ°€ κ³ μ©λ‰μ΄κ±°λ‚ λΉλ„κ°€ μ¦μ€ κ²½μ° `WebSocket` μ΄ μΆ‹λ‹¤.
<br><br>
# μ°Έκ³  λ§ν¬

[Spring WebSocket μ†κ°](https://supawer0728.github.io/2018/03/30/spring-websocket/)

[Spring webSocket with stomp κΈ°λ³Έ κ°λ… μ •λ¦¬](https://wedul.site/692)

[[Spring Boot] WebSocketκ³Ό μ±„ν… (1)](https://dev-gorany.tistory.com/212)

[[Spring Boot] WebSocketκ³Ό μ±„ν… (2) - SockJS](https://dev-gorany.tistory.com/224)

[[Spring Boot] WebSocketκ³Ό μ±„ν… (3) - STOMP](https://dev-gorany.tistory.com/235?category=901854)

[μ›Ήμ†μΌ“ - μ„ν‚¤λ°±κ³Ό, μ°λ¦¬ λ¨λ‘μ λ°±κ³Όμ‚¬μ „](https://ko.wikipedia.org/wiki/%EC%9B%B9%EC%86%8C%EC%BC%93)
