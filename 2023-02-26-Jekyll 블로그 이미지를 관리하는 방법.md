---
aliases: []
date-created: 2023-02-26 15:33
date-updated: 2023-02-27 06:11
tags: [jekyll, ]
categories: [조각글]
---

<br><br>
## 문제

- 내 블로그 문서를 순수한 마크다운으로 유지하고 싶다.
	- Jekyll 에서 지원하는 `liquid` 템플릿 표현들을 사용하고 싶지 않았다. 
	- 블로그 플랫폼을 옮길 수도 있을거라고 생각이 들었다. 

- Jekyll 에서 상대경로를 사용할 때 문제.
	- `_posts` 에 작성하는 문서에서 이미지 경로가 상대경로이면, `_site/posts` 에서 인식되지 않는다.
	- 왜냐하면 이미지는 `_site/posts` 로 옮겨지지 않기 때문.
	- `_posts` 에 있는 정적 파일들도 옮겨주는 jekyll 플러기인이 있긴 했는데, 정상 동작하지 않았다. 또, 써드파티 플러그인을 Github Pages 에서는 지원하지 않는다고 하여 이것은 사용하지 않기로 했다.

<br><br>
## 원인

- obsidian 에서 이미지 링크가 너무 유연하게 동작한다.
- obsidian 설정에서 'vault 내 절대경로 ' 로 이미지를 표시하더라도 실제 `/attachments/...` 와 같은 절대경로 아니다.
	- 이미지가 링크될때에는 `attachments/...` 같은 방식으로 `/` 가 생략된다.
	- 실질적으로 obsidian 에서는 이 링크 경로를 따르는 것이 아니라 자체적으로 이미지를 찾아가는 방식이 있는 듯 했다.
	- 찾아본 결과 유일한 경로에 따라 이미지 파일 이름의 **유일한 이름** 을 찾는 듯 하다. 그래서 'shortest if possible' 과 같은 형태가 가능하다. 즉, 이미지 경로 정보 없이 이미지 이름만으로 찾아갈 수 있음. 

<br><br>
## 방법들

1. 이미지들의 경로를 일일이 절대경로로 바꿔주기 
	1. obsidian 에 드래그앤 드랍하는 이미지는 vault 내 절대경로로 링크해주지 않음.(위에서 이야기 한 점 )
	2. 그래서 경로에 `/...` 처럼 `/` 를 모두 붙여주는 것. 그리고 jekyll 프로젝트 루트에 정적파일 보관 경로와 매칭될 수 있도록 만들어주는 것.
		1. 이 방법이 실제로 되는 걸 확인하긴 했지만 피하고 싶었다. 왜냐하면 obsidian 에서 vault 를 어느 디렉토리에서 여느냐에 따라 이미지가 안보이는 경우가 있었기 때문이다.

2. `_post` 내 정적파일들을 옮겨주는 jekyll 플러그인 사용하기
	- [GitHub - nhoizey/jekyll-postfiles: A Jekyll plugin that copies static files from the \_posts to the \_site folder](https://github.com/nhoizey/jekyll-postfiles)
	- `postsfiles` 라는 플러그인이 있었는데, 더이상 관리도 되지 않았고 작동도 안되어 채택하지 않았다.
dd
<br><br>
## 나의 해결방법
> S3에 이미지를 업로드하여 링크하는 방법이다. obsidian 에서 플러그인을 찾아 적용해보았다.


### 성과

마크다운 문서에서 이미지 링크를 플랫폼과 독립되도록 사용할 수 있다.

- 호스팅해주는 github, jekyll 플랫폼 및 템플릿 엔진에 의존하는 문제를 해결
- 이미지를 내가 직접 관리

- 안좋은 점
- obsidian 플러그인 관리 규모가 매우 작아서 불안하다. 내가 직접 PR 을 하든 하는 것이 좋겠다.

다만 기존 포스트들의 이미지를 하나하나 s3 와 동기화되도록 작업해주어야 한다.

플러그인에 이 기능이 구현되면 좋겠지만 차차 아직 타입스크립트를 잘 모르니 일단은 수작업으로 하기로 했다.
